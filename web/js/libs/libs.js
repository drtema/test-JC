!function(){var e="undefined"==typeof exports?window:exports,a={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0};function t(){}(e.Retina=t).configure=function(t){for(var e in null===t&&(t={}),t)t.hasOwnProperty(e)&&(a[e]=t[e])},t.init=function(t){null===t&&(t=e);var a=t.onload||function(){};t.onload=function(){var t,e,i=document.getElementsByTagName("img"),n=[];for(t=0;t<i.length;t+=1)(e=i[t]).getAttributeNode("data-no-retina")||n.push(new s(e));a()}},t.isRetina=function(){return 1<e.devicePixelRatio||!(!e.matchMedia||!e.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)").matches)};var r=/\.\w+$/;function h(t){return a.retinaImageSuffix+t}function o(t,e){if(this.path=t||"",null!=e)this.at_2x_path=e,this.perform_check=!1;else{if(void 0!==document.createElement){var i=document.createElement("a");i.href=this.path,i.pathname=i.pathname.replace(r,h),this.at_2x_path=i.href}else{var n=this.path.split("?");n[0]=n[0].replace(r,h),this.at_2x_path=n.join("?")}this.perform_check=!0}}function s(t){this.el=t,this.path=new o(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var e=this;this.path.check_2x_variant(function(t){t&&e.swap()})}(e.RetinaImagePath=o).confirmed_paths=[],o.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},o.prototype.check_2x_variant=function(e){var i,n=this;return this.is_external()?e(!1):this.perform_check||void 0===this.at_2x_path||null===this.at_2x_path?this.at_2x_path in o.confirmed_paths?e(!0):((i=new XMLHttpRequest).open("HEAD",this.at_2x_path),i.onreadystatechange=function(){if(4!==i.readyState)return e(!1);if(200<=i.status&&i.status<=399){if(a.check_mime_type){var t=i.getResponseHeader("Content-Type");if(null===t||!t.match(/^image/i))return e(!1)}return o.confirmed_paths.push(n.at_2x_path),e(!0)}return e(!1)},void i.send()):e(!0)},(e.RetinaImage=s).prototype.swap=function(e){void 0===e&&(e=this.path.at_2x_path);var i=this;!function t(){i.el.complete?(a.force_original_dimensions&&(i.el.setAttribute("width",i.el.offsetWidth),i.el.setAttribute("height",i.el.offsetHeight)),i.el.setAttribute("src",e)):setTimeout(t,5)}()},t.isRetina()&&t.init(e)}();